@{
    Layout = null;
}
@using DotPay.Web.Admin;
<div class="panel panel-default">
    <div class="panel-heading">
        <h4 class="panel-title" ng-bind="title"></h4>
    </div>
    <div class="panel-body">
        <div class="pull-left">
            <button type="button" class="btn btn-success" ng-click="openSetModal()">修改</button>
        </div>
    </div>
    <table class="table table-striped table-bordered">
        <thead>
            <tr>
                <th>#</th>
                <th>ID</th>
                <th>费用率</th>
                <th>价格小数位</th>
                <th>金额小数位</th>
                <th>成交量小数位</th>
                <th>最小金额</th>
                <th>最后修改时间</th>
                <th>是否开放</th>
            </tr>
        </thead>
        <tbody>
            <tr ng-repeat="market in markets">
                <td><input type="checkbox" ng-model="market.Checked" ng-change="checkedChange(market)"></td>
                <td ng-bind="market.Name"></td>
                <td ng-bind="market.FeeRate"></td>
                <td ng-bind="market.PriceDecimal"></td>
                <td ng-bind="market.AmountDecimal"></td>
                <td ng-bind="market.VolumeDecimal"></td>
                <td ng-bind="market.MinAmount"></td>
                <td ng-bind="market.UpdateAt*1000 + 28800000 | date:'yyyy-MM-dd'"></td> 
                <td ng-bind="market.IsOpen==1?'是':'否'"></td> 
            </tr>
        </tbody>
    </table>
</div>

<div>
    <script type="text/ng-template" id="MarketSettingModalContent.html">
        <div class="modal-header">
            <h3>{{marketSetting.Name}}市场修改</h3>
        </div>
        <div class="modal-body">
            <form name="marketForm" role="form">
                <table class="table-condensed" style="width: 95%">
                    <tr>
                        <td><label>费用率</label></td>
                        <td><input type="text" ng-trim="true" class="form-control" required ng-model="marketSetting.FeeRate"></td>
                    </tr>
                    <tr>
                        <td><label>价格小数位</label>
                        <td><input type="text" ng-trim="true" class="form-control" required ng-model="marketSetting.PriceDecimal"></td>
                    </tr>
                    <tr>
                        <td><label>金额小数位</label>
                        <td><input type="text" ng-trim="true" class="form-control" required ng-model="marketSetting.AmountDecimal"></td>
                    </tr>
                    <tr>
                        <td><label>成交量小数位</label>
                        <td><input type="text" ng-trim="true" class="form-control" required ng-model="marketSetting.VolumeDecimal"></td>
                    </tr>
                    <tr>
                        <td><label>最小金额</label>
                        <td><input type="text" ng-trim="true" class="form-control" required ng-model="marketSetting.MinAmount"></td>
                    </tr>
                </table>
                <div class="modal-footer">
                    <button class="btn btn-warning" ng-click="cancel()">取消</button>
                    <button class="btn btn-primary" ng-click="save(marketSetting)">保存</button>
                </div>
            </form>
        </div>
    </script>
</div>


