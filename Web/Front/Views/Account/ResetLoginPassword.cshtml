@using Dotpay.Front.Controllers
@using Dotpay.Language
@{
    Layout = "~/Views/Shared/_Layout.cshtml";
}

<div class="content register-content" data-scrollview="true">
    <link href="~/assets/css/login.css" rel="stylesheet" />
    <div class="container fadeInDown contentAnimated" data-animation="true" data-animation-type="fadeInDown">
        <div class="row">
            <div class="col-md-10 col-sm-10 col-md-offset-1 col-sm-offset-1">
                <div class="modal-content register-wraper login-single-wraper">
                    @if (ViewBag.Valid)
                    {
                        <form class="form-horizontal register-form" data-parsley-validate="true" id="formResetLoginPassword">
                            <div class="modal-header">
                                <h2 class="modal-title login-title">重置登陆密码<span class="blue">@Html.Lang("DotpayLogoTitle")</span></h2>
                            </div>
                            <div class="modal-body">
                                @Html.AntiForgeryToken()
                                <div class="form-group">
                                    <label class="control-label col-md-4 col-sm-4" for="password">注册邮箱 :</label>
                                    <div class="col-md-8 col-sm-6">
                                        <label class="control-label col-md-4 col-sm-4">@ViewBag.Email</label>
                                        <input name="email" type="hidden" value="@ViewBag.Email" />
                                        <input name="token" type="hidden" value="@ViewBag.Token" />
                                    </div>
                                </div>
                                <div class="form-group">
                                    <label class="control-label col-md-4 col-sm-4" for="password">新登陆密码 :</label>
                                    <div class="col-md-8 col-sm-6">
                                        <input class="form-control" type="password" id="password" name="password" autocomplete="off" placeholder="请输入新的登陆密码"/>
                                    </div>
                                </div>
                                <div class="form-group">
                                    <label class="control-label col-md-4 col-sm-4" for="password">确认密码 :</label>
                                    <div class="col-md-8 col-sm-6">
                                        <input class="form-control" type="password" id="confirmPassword" name="confirmPassword" autocomplete="off" placeholder="请再次输入登陆密码"/>
                                    </div>
                                </div>
                                <div id="resetMessage">&nbsp;</div>
                            </div>
                            <div class="modal-footer">
                                <div class="col-md-12 col-sm-12 text-right">
                                    <button type="submit" class="btn btn-sm btn-success col-md-offset-1">@Html.Lang("Submit")</button>
                                </div>
                            </div>
                        </form>
                    }
                    else
                    {
                        <h2>@Html.Lang("Invlid login password reset link.")</h2>
                    }
                </div>
            </div>
            <script>
                $(document).ready(function () {
                    $.getScript('/assets/js/resetpassword.js').done(function () {
                        ResetPassword.initResetLoginPasswordForm(@Html.GetLang().ToString("D"));
                    });
                });
            </script>
        </div>
    </div>
</div>